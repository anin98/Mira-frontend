"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{16925:(e,t,r)=>{r.d(t,{A:()=>n});var a=r(95155),o=r(12115),s=r(48834),l=r.n(s);let n=e=>{let{message:t="Loading...",fullScreen:r=!1,className:s=""}=e,n=(0,o.useRef)(null),i=(0,o.useRef)(null);return((0,o.useEffect)(()=>(n.current&&!i.current&&(i.current=l().loadAnimation({container:n.current,renderer:"svg",loop:!0,autoplay:!0,path:"/Loading.json"})),()=>{i.current&&(i.current.destroy(),i.current=null)}),[]),r)?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-90",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{ref:n,className:"w-32 h-32 mx-auto"}),t&&(0,a.jsx)("p",{className:"mt-4 text-lg font-medium text-gray-700",children:t})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center ".concat(s),children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{ref:n,className:"w-24 h-24 mx-auto"}),t&&(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:t})]})})}},16961:(e,t,r)=>{r.d(t,{default:()=>p});var a=r(95155),o=r(12115),s=r(6874),l=r.n(s),n=r(66766),i=r(35695),c=r(328),d=r(75032),m=r(50274),h=r(27540);let u=e=>{let{userData:t,className:r=""}=e,[s,l]=(0,o.useState)(""),[n,u]=(0,o.useState)(""),x=(0,i.useRouter)();(0,o.useEffect)(()=>{if(t){let e=t.displayName||"".concat(t.firstName," ").concat(t.lastName).trim(),r=t.displayName?t.displayName.charAt(0).toUpperCase():"".concat(t.firstName.charAt(0)).concat(t.lastName.charAt(0)).toUpperCase();u(e),l(r)}else{let e=localStorage.getItem("firstName")||"",t=localStorage.getItem("lastName")||"",r=localStorage.getItem("displayName")||"",a=localStorage.getItem("verifiedPhone")||"",o="",s="";r?(o=r,s=r.charAt(0).toUpperCase()):e||t?(o="".concat(e," ").concat(t).trim(),s="".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase()):(o=a||"User",s="U"),u(o),l(s)}},[t]);let g=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("userId"),localStorage.removeItem("displayName"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName"),localStorage.removeItem("email"),localStorage.removeItem("customerId"),localStorage.removeItem("verifiedPhone"),localStorage.removeItem("refreshToken"),window.dispatchEvent(new Event("loginStatusChanged")),window.location.href="/"},p=[{key:"user-info",label:(0,a.jsxs)("div",{className:"px-2 py-1 border-b border-gray-200",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:n||"User"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(null==t?void 0:t.email)||localStorage.getItem("email")||"user@example.com"})]}),disabled:!0},{type:"divider"},{key:"dashboard",label:"Manage my profile",icon:(0,a.jsx)(m.A,{})},{type:"divider"},{key:"logout",label:"Logout",icon:(0,a.jsx)(h.A,{}),danger:!0}];return(0,a.jsx)("div",{className:r,children:(0,a.jsx)(c.A,{menu:{items:p,onClick:e=>{let{key:t}=e;switch(t){case"dashboard":x.push("/CustomerDashboard");break;case"profile":x.push("/Profile");break;case"logout":g()}}},trigger:["click"],placement:"bottomRight",arrow:{pointAtCenter:!0},children:(0,a.jsxs)("div",{className:"flex items-center cursor-pointer hover:bg-gray-50 rounded-full p-1 transition-colors",children:[(0,a.jsx)(d.A,{size:40,style:{backgroundColor:"#1890ff",color:"white",fontWeight:"bold",cursor:"pointer"},icon:s?null:(0,a.jsx)(m.A,{}),children:s}),(0,a.jsx)("span",{className:"ml-2 text-gray-700 font-medium hidden sm:block max-w-32 truncate",children:n})]})})})};var x=r(94226);let g=e=>{let{companyData:t,sidebarWidth:r=0}=e,[s,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),m=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("company_data"),window.location.href="/"};return(0,a.jsxs)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 transition-all duration-300",style:{marginLeft:r>0?"".concat(r,"px"):"0",width:r>0?"calc(100% - ".concat(r,"px)"):"100%"},children:[(0,a.jsxs)("div",{className:"max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/",className:"flex items-center",children:(0,a.jsx)(n.default,{src:"/mira-ai.png",alt:"Mira AI Logo",width:150,height:50,className:"h-10 w-auto",priority:!0})})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(l(),{href:"/Dashboard",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium",children:"Dashboard"}),(0,a.jsx)(l(),{href:"/company/products",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium",children:"Products"}),(0,a.jsx)(l(),{href:"/company/orders",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium",children:"Orders"}),(0,a.jsx)(l(),{href:"/company/settings",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium",children:"Settings"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"h-6 w-px bg-gray-300 hidden md:block"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>{d(!c)},className:"flex items-center space-x-2 text-gray-700 hover:text-gray-900 transition-colors",children:[(0,a.jsx)("span",{className:"font-medium",children:t.name}),(0,a.jsx)("svg",{className:"h-4 w-4 transition-transform ".concat(c?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 py-1 z-50",children:[(0,a.jsx)(l(),{href:"/company/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",onClick:()=>d(!1),children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2V7zm14 4h-2"})}),(0,a.jsx)("span",{children:"Dashboard"})]})}),(0,a.jsx)("hr",{className:"my-1"}),(0,a.jsx)("button",{onClick:m,className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,a.jsx)("span",{children:"Logout"})]})})]})]}),(0,a.jsx)("button",{onClick:()=>{i(!s)},className:"md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors","aria-label":"Toggle mobile menu",children:(0,a.jsx)("svg",{className:"h-6 w-6 transition-transform ".concat(s?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),s&&(0,a.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)(l(),{href:"/Dashboard",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1",onClick:()=>i(!1),children:"Dashboard"}),(0,a.jsx)(l(),{href:"/company/products",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1",onClick:()=>i(!1),children:"Products"}),(0,a.jsx)(l(),{href:"/company/orders",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1",onClick:()=>i(!1),children:"Orders"}),(0,a.jsx)(l(),{href:"/company/settings",className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1",onClick:()=>i(!1),children:"Settings"}),(0,a.jsxs)("div",{className:"flex flex-col space-y-2 pt-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"px-2 py-1",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:t.email})]}),(0,a.jsx)("button",{onClick:m,className:"text-red-600 hover:text-red-700 transition-colors font-medium px-2 py-1 text-left",children:"Logout"})]})]})})]}),c&&(0,a.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>d(!1)})]})},p=e=>{let{sidebarWidth:t=0}=e,[r,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),[m,h]=(0,o.useState)(null),[p,f]=(0,o.useState)(null),[y,v]=(0,o.useState)(!0),[j,N]=(0,o.useState)(!1),b=(0,i.useRouter)(),{startNavigation:k}=(0,x.t)();if((0,o.useEffect)(()=>{let e=async()=>{try{let e=localStorage.getItem("access_token");if(!e)return void N(!1);let t=await fetch("https://api.grayscale-technologies.com/api/v1/companies/",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let e=await t.json(),r=Array.isArray(e)&&e.length>0;N(r)}else N(!1)}catch(e){console.error("Error checking company account:",e),N(!1)}};r&&e()},[r]),(0,o.useEffect)(()=>{let e=async()=>{v(!0);try{let u=localStorage.getItem("company_access_token"),x=localStorage.getItem("company_data");if(console.log("\uD83C\uDFE2 Checking company login:",{hasToken:!!u,hasData:!!x}),u&&x)try{let e=JSON.parse(x);h(e),s(!1),f(null),console.log("✅ Company logged in:",e.name),v(!1);return}catch(e){console.error("❌ Error parsing company data:",e),localStorage.removeItem("company_access_token"),localStorage.removeItem("company_data"),h(null)}let g=localStorage.getItem("access_token"),p=localStorage.getItem("userId"),y=localStorage.getItem("displayName"),j=localStorage.getItem("firstName"),N=localStorage.getItem("lastName"),b=localStorage.getItem("email");if(console.log("\uD83D\uDC64 Checking user login:",{hasToken:!!g,hasUserId:!!p,hasDisplayName:!!y,hasFirstName:!!j,hasLastName:!!N,hasEmail:!!b}),g&&p)if(y&&j&&N&&b)console.log("✅ Complete user data found in localStorage"),f({firstName:j,lastName:N,displayName:y,email:b,userId:p}),s(!0),h(null),console.log("✅ User logged in with cached profile data");else{console.log("\uD83D\uDD04 Token exists but profile incomplete, fetching profile...");try{let u=await fetch("https://api.grayscale-technologies.com/api/v1/customers/".concat(p,"/"),{headers:{Authorization:"Bearer ".concat(g),"Content-Type":"application/json"}});if(u.ok){var e,t,r,a,o,l,n,i,c,d,m;let x=await u.json();console.log("✅ Profile data fetched:",x);let g=null==(e=x.name)?void 0:e.trim(),y=(null==(t=x.email)?void 0:t.trim())||(null==(a=x.user)||null==(r=a.email)?void 0:r.trim());g&&y?(localStorage.setItem("customerId",(null==(o=x.id)?void 0:o.toString())||""),localStorage.setItem("firstName",(null==(l=x.user)?void 0:l.first_name)||""),localStorage.setItem("lastName",(null==(n=x.user)?void 0:n.last_name)||""),localStorage.setItem("displayName",x.name||""),localStorage.setItem("email",x.email||(null==(i=x.user)?void 0:i.email)||""),f({firstName:(null==(c=x.user)?void 0:c.first_name)||"",lastName:(null==(d=x.user)?void 0:d.last_name)||"",displayName:x.name||"",email:x.email||(null==(m=x.user)?void 0:m.email)||"",userId:p}),s(!0),h(null),console.log("✅ User logged in with fetched profile data")):(console.log("⚠️ Profile incomplete, user needs to complete registration"),s(!1),f(null),h(null))}else console.log("⚠️ Could not fetch profile, treating as incomplete"),s(!1),f(null),h(null)}catch(e){console.error("❌ Error fetching profile:",e),s(!1),f(null),h(null)}}else console.log("❌ No user login data found"),s(!1),f(null),h(null)}catch(e){console.error("❌ Error checking login status:",e),s(!1),f(null),h(null)}finally{v(!1)}};e();let t=()=>{console.log("\uD83D\uDCE2 Storage changed, rechecking login status"),e()};return window.addEventListener("storage",t),window.addEventListener("loginStatusChanged",t),()=>{window.removeEventListener("storage",t),window.removeEventListener("loginStatusChanged",t)}},[]),m)return(0,a.jsx)(g,{companyData:m,sidebarWidth:t});let w=(e,t)=>{t.preventDefault(),k(),setTimeout(()=>{b.push(e)},300)},C=e=>{e.preventDefault(),k(),setTimeout(()=>{b.push("/Dashboard")},300)};return y?(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 transition-all duration-300",style:{marginLeft:t>0?"".concat(t,"px"):"0",width:t>0?"calc(100% - ".concat(t,"px)"):"100%"},children:(0,a.jsx)("div",{className:"max-w-7xl px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/",className:"flex items-center",children:(0,a.jsx)(n.default,{src:"/mira-ai.png",alt:"Mira AI Logo",width:150,height:50,className:"h-10 w-auto",priority:!0})})}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("div",{className:"animate-pulse h-8 w-20 bg-gray-200 rounded"})})]})})}):(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40 transition-all duration-300",style:{marginLeft:t>0?"".concat(t,"px"):"0",width:t>0?"calc(100% - ".concat(t,"px)"):"100%"},children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(l(),{href:"/",className:"flex items-center",children:(0,a.jsx)(n.default,{src:"/mira-ai.png",alt:"Mira AI Logo",width:150,height:50,priority:!0})})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)("a",{href:"/Features",onClick:e=>w("/Features",e),className:"text-gray-600 hover:text-gray-900 transition-colors font-medium cursor-pointer",children:"Features"}),(0,a.jsx)("a",{href:"/Pricing",onClick:e=>w("/Pricing",e),className:"text-gray-600 hover:text-gray-900 transition-colors font-medium cursor-pointer",children:"Pricing"}),(0,a.jsx)("a",{href:"/documentation",onClick:e=>w("/documentation",e),className:"text-gray-600 hover:text-gray-900 transition-colors font-medium cursor-pointer",children:"Documentation"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[r&&p?(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[j&&(0,a.jsx)("button",{onClick:C,className:"hidden md:block bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 font-medium",children:"Manage Dashboard"}),(0,a.jsx)(u,{})]}):(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,a.jsx)("a",{href:"/CompanyAuth",onClick:e=>w("/CompanyAuth",e),className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 font-medium cursor-pointer",children:"Register your Business"}),(0,a.jsx)("a",{href:"/CustomerAuth",onClick:e=>w("/CustomerAuth",e),className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-medium cursor-pointer",children:"Login"})]}),(0,a.jsx)("button",{onClick:()=>{d(!c)},className:"md:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100 transition-colors","aria-label":"Toggle mobile menu",children:(0,a.jsx)("svg",{className:"h-6 w-6 transition-transform ".concat(c?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),c&&(0,a.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)("a",{href:"/Features",onClick:e=>{d(!1),w("/Features",e)},className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1 cursor-pointer",children:"Features"}),(0,a.jsx)("a",{href:"/Pricing",onClick:e=>{d(!1),w("/Pricing",e)},className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1 cursor-pointer",children:"Pricing"}),(0,a.jsx)("a",{href:"/documentation",onClick:e=>{d(!1),w("/documentation",e)},className:"text-gray-600 hover:text-gray-900 transition-colors font-medium px-2 py-1 cursor-pointer",children:"Documentation"}),r&&p?(0,a.jsxs)("div",{className:"flex flex-col space-y-2 pt-4 border-t border-gray-200",children:[j&&(0,a.jsx)("button",{onClick:e=>{d(!1),C(e)},className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 font-medium text-center",children:"Manage Dashboard"}),(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(u,{})})]}):(0,a.jsxs)("div",{className:"flex flex-col space-y-2 pt-4 border-t border-gray-200",children:[(0,a.jsx)("a",{href:"/CompanyAuth",onClick:e=>{d(!1),w("/CompanyAuth",e)},className:"bg-gradient-to-r from-purple-600 to-purple-700 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-200 font-medium text-center cursor-pointer",children:"Join as Company"}),(0,a.jsx)("a",{href:"/CustomerAuth",onClick:e=>{d(!1),w("/CustomerAuth",e)},className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-medium text-center cursor-pointer",children:"Login"})]})]})})]})})}},94226:(e,t,r)=>{r.d(t,{NavigationProvider:()=>i,t:()=>c});var a=r(95155),o=r(12115),s=r(35695),l=r(16925);let n=(0,o.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(!1),c=(0,s.usePathname)();return(0,o.useEffect)(()=>{i(!1)},[c]),(0,a.jsxs)(n.Provider,{value:{isNavigating:r,startNavigation:()=>i(!0),stopNavigation:()=>i(!1)},children:[r&&(0,a.jsx)(l.A,{fullScreen:!0,message:"Loading..."}),t]})},c=()=>{let e=(0,o.useContext)(n);if(void 0===e)throw Error("useNavigationContext must be used within a NavigationProvider");return e}}}]);