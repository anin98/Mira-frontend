(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[969],{3653:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>eS});var a=t(95155),r=t(12115),l=t(35695),n=t(16961),i=t(63330),c=t(27100),o=t(7853),d=t(58735),x=t(87344),m=t(14412),u=t(58587);let h=e=>{let{className:s="",onNavigate:t,activeComponent:l}=e,[n,h]=(0,r.useState)(!1),[g,p]=(0,r.useState)(!1),[f,j]=(0,r.useState)(null),y=[{key:"dashboard",label:"Sales Dashboard",icon:(0,a.jsx)(i.A,{className:"text-lg"}),route:"dashboard",description:"View sales metrics and analytics"},{key:"products",label:"Manage Products",icon:(0,a.jsx)(c.A,{className:"text-lg"}),route:"products",description:"Add and manage your products"},{key:"company",label:"Manage Company",icon:(0,a.jsx)(o.A,{className:"text-lg"}),route:"company",description:"Configure company settings"},{key:"conversations",label:"Manage Mira Conversation",icon:(0,a.jsx)(d.A,{className:"text-lg"}),route:"conversations",description:"View customer conversations"},{key:"ai-persona",label:"Manage AI Persona",icon:(0,a.jsx)(x.A,{className:"text-lg"}),route:"ai-persona",description:"Configure AI behavior"}],b=()=>{p(!1)},v=e=>{t(e),b()},N=e=>l===e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{p(!g)},className:"lg:hidden fixed top-20 left-4 z-50 p-2 bg-white rounded-lg shadow-md border border-gray-200 hover:bg-gray-50 transition-colors","aria-label":"Toggle sidebar",children:(0,a.jsx)(m.A,{className:"text-lg text-gray-600"})}),g&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:b}),(0,a.jsxs)("aside",{className:"\n          fixed left-0 top-0 h-full bg-white border-r border-gray-200 shadow-sm z-50 transition-all duration-300\n          ".concat(n?"w-20":"w-64","\n          ").concat(g?"translate-x-0":"-translate-x-full lg:translate-x-0","\n          ").concat(s,"\n        "),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 h-16",children:[!n&&(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:"Dashboard"}),(0,a.jsx)("button",{onClick:()=>{h(!n)},className:"hidden lg:flex p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":n?"Expand sidebar":"Collapse sidebar",children:(0,a.jsx)(m.A,{className:"text-gray-600"})}),(0,a.jsx)("button",{onClick:b,className:"lg:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close sidebar",children:(0,a.jsx)(u.A,{className:"text-gray-600"})})]}),(0,a.jsx)("nav",{className:"py-6 space-y-2 overflow-y-auto h-[calc(100vh-4rem)]",children:y.map(e=>(0,a.jsxs)("div",{onClick:()=>v(e.route),onMouseEnter:()=>j(e.route),onMouseLeave:()=>j(null),className:"group flex items-center gap-3 px-3 py-3 mx-2 rounded-lg cursor-pointer transition-all duration-200 ".concat(N(e.route)?"bg-blue-50 text-blue-700 shadow-sm":f===e.route?"bg-gray-100 text-gray-700":"text-gray-600 hover:bg-gray-50"," ").concat(n?"justify-center":"justify-start"),style:{boxShadow:N(e.route)?"inset 4px 0 0 0 #2563eb":"none"},children:[(0,a.jsx)("div",{className:"flex-shrink-0 ".concat(N(e.route)?"text-blue-600":"text-gray-500"),children:e.icon}),!n&&(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-medium truncate ".concat(N(e.route)?"text-blue-700":"text-gray-700"),children:e.label}),e.description&&(0,a.jsx)("div",{className:"text-xs text-gray-500 truncate mt-0.5",children:e.description})]}),!n&&N(e.route)&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full flex-shrink-0"})]},e.route))}),!n&&(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gray-50",children:(0,a.jsx)("div",{className:"text-xs text-gray-500 text-center",children:"Mira AI Dashboard"})})]}),(0,a.jsx)("div",{className:"\n          hidden lg:block transition-all duration-300\n          ".concat(n?"w-20":"w-64","\n        ")})]})};var g=t(53904),p=t(37108),f=t(55868),j=t(17580),y=t(33109),b=t(16785),v=t(71539);let N=e=>{let{title:s,value:t,icon:r,color:l,loading:n}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-600 truncate",children:s}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900 mt-1",children:n?"...":t})]}),(0,a.jsx)(r,{className:"w-5 h-5 ".concat(l," flex-shrink-0 ml-2")})]})})},w=e=>{let{stats:s,loading:t}=e,r=[{title:"Total Orders",value:(null==s?void 0:s.total_orders)||0,icon:p.A,color:"text-blue-600"},{title:"Revenue",value:"৳".concat(((null==s?void 0:s.total_revenue)||0).toFixed(0)),icon:f.A,color:"text-green-600"},{title:"Customers",value:(null==s?void 0:s.unique_customers)||0,icon:j.A,color:"text-purple-600"},{title:"Avg Order",value:"৳".concat(((null==s?void 0:s.avg_order_value)||0).toFixed(0)),icon:y.A,color:"text-orange-600"},{title:"Items Sold",value:(null==s?void 0:s.total_quantity)||0,icon:b.A,color:"text-red-600"},{title:"Recent (24h)",value:(null==s?void 0:s.recent_orders)||0,icon:v.A,color:"text-yellow-600"}];return(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:r.map((e,s)=>(0,a.jsx)(N,{...e,loading:t},s))})};var A=t(71007),C=t(69074);let _=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending_payment":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-orange-100 text-orange-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=e=>e?e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"Unknown",S=e=>{let{orders:s,loading:t}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),(0,a.jsx)(p.A,{className:"w-5 h-5 text-gray-400"})]})}),(0,a.jsx)("div",{className:"p-6",children:t?(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-2"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]},s))}):s.length>0?(0,a.jsx)("div",{className:"space-y-4",children:s.slice(-5).reverse().map((e,s)=>{var t,r;return(0,a.jsxs)("div",{className:"flex justify-between items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.guest_name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(_(e.status)),children:k(e.status)})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:["Order #",e.id," • ",(null==(t=e.items)?void 0:t.length)||0," item",(null==(r=e.items)?void 0:r.length)!==1?"s":""]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(C.A,{className:"w-3 h-3 text-gray-400"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[new Date(e.created_at).toLocaleDateString()," at ",new Date(e.created_at).toLocaleTimeString()]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"flex items-center justify-end mb-1",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-green-600",children:["৳",e.total_amount]})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["+৳",e.delivery_charge," delivery"]})]})]},e.id||s)})}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No orders yet"})})]})};var E=t(86151);let I=e=>{let{orders:s,loading:t}=e,r=(()=>{if(!s.length)return[];let e={"Small Orders (৳1-500)":0,"Medium Orders (৳501-1000)":0,"Large Orders (৳1001-2000)":0,"Premium Orders (৳2000+)":0};return s.forEach(s=>{let t=s.total_amount||0;t<=500?e["Small Orders (৳1-500)"]++:t<=1e3?e["Medium Orders (৳501-1000)"]++:t<=2e3?e["Large Orders (৳1001-2000)"]++:e["Premium Orders (৳2000+)"]++}),Object.entries(e).filter(e=>{let[,s]=e;return s>0}).sort((e,s)=>{let[,t]=e,[,a]=s;return a-t}).slice(0,5)})(),l=Math.max(...r.map(e=>{let[,s]=e;return s}),1);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Order Categories"}),(0,a.jsx)(y.A,{className:"w-5 h-5 text-gray-400"})]})}),(0,a.jsx)("div",{className:"p-6",children:t?(0,a.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-2 bg-gray-200 rounded w-full"})]},s))}):r.length>0?(0,a.jsxs)("div",{className:"space-y-4",children:[r.map((e,s)=>{let[t,r]=e;return(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(E.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:t})]}),(0,a.jsx)("div",{className:"w-48 bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(r/l*100,100),"%")}})})]}),(0,a.jsxs)("div",{className:"text-right ml-4",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:r}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"orders"})]})]},s)}),(0,a.jsx)("div",{className:"border-t pt-4 mt-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:s.length}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Total Orders"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["৳",s.reduce((e,s)=>e+(s.total_amount||0),0).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Total Revenue"})]})]})})]}):(0,a.jsx)("p",{className:"text-gray-500 text-center py-8",children:"No order data yet"})})]})};var D=t(91788),P=t(19420),O=t(4516);let T=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},L=e=>{switch(null==e?void 0:e.toLowerCase()){case"pending_payment":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"processing":return"bg-orange-100 text-orange-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},F=e=>e?e.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase()):"Unknown",z=e=>{let{orders:s,loading:t,onExportCSV:r}=e;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,a.jsx)("div",{className:"p-6 border-b",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"All Orders"}),(0,a.jsxs)(T,{onClick:r,disabled:0===s.length,variant:"outline",className:"flex items-center space-x-2 text-blue-600 border-blue-300 hover:bg-blue-50",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export CSV"})]})]})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:t?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"grid grid-cols-7 gap-4",children:[...Array(7)].map((e,s)=>(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"},s))},s))})}):s.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map((e,s)=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(p.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["#",e.id]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.guest_name})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(P.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:e.guest_phone})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(O.A,{className:"w-4 h-4 text-gray-400 mr-2 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm text-gray-600 max-w-xs truncate",children:e.guest_address})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 text-gray-400 mr-1"}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"font-medium text-green-600",children:["৳",e.total_amount]}),(0,a.jsxs)("div",{className:"text-gray-500 text-xs",children:["Subtotal: ৳",e.subtotal," + Delivery: ৳",e.delivery_charge]})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(L(e.status)),children:F(e.status)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,a.jsx)("div",{children:new Date(e.created_at).toLocaleDateString()}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleTimeString()})]})]})})]},e.id||s))})]}):(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No orders found"}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Orders will appear here once customers start placing them through the chat"})]})})]})};class M{async fetchWithAuth(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=localStorage.getItem("access_token"),a=await fetch("".concat("https://api.grayscale-technologies.com/api").concat(e),{...s,headers:{"Content-Type":"application/json",...t&&{Authorization:"Bearer ".concat(t)},...s.headers}});if(!a.ok)throw Error("API Error: ".concat(a.status," ").concat(a.statusText));return a.json()}async getAnalyticsSummary(){return this.fetchWithAuth("/dashboard/analytics-summary/")}async getOrders(){let e=await this.fetchWithAuth("/dashboard/orders/");return console.log("Raw API response:",e),{orders:e||[],total:(null==e?void 0:e.length)||0}}async getProducts(){let e=await this.fetchWithAuth("/dashboard/products/");return e.results||e.products||[]}async getInbox(){let e=await this.fetchWithAuth("/dashboard/inbox/");return e.results||e.conversations||[]}async getConversationDetails(e){return this.fetchWithAuth("/dashboard/".concat(e,"/conversation/"))}async getAIConfig(){return this.fetchWithAuth("/dashboard/ai-config/")}async updateAIConfig(e){return this.fetchWithAuth("/dashboard/ai-config/",{method:"PUT",body:JSON.stringify(e)})}}let U=new M,R=()=>{let[e,s]=(0,r.useState)({total_orders:0,total_revenue:0,unique_customers:0,avg_order_value:0,total_quantity:0,recent_orders:0}),[t,a]=(0,r.useState)(!0),[l,n]=(0,r.useState)(""),i=(0,r.useCallback)(async()=>{try{a(!0),n("");let e=await U.getAnalyticsSummary();s(e)}catch(e){console.error("Error fetching analytics:",e),n(e instanceof Error?e.message:"Failed to fetch analytics")}finally{a(!1)}},[]);return(0,r.useEffect)(()=>{i()},[i]),{stats:e,loading:t,error:l,refetch:i}},q=()=>{let[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)(0),[l,n]=(0,r.useState)(!0),[i,c]=(0,r.useState)(""),o=(0,r.useCallback)(async()=>{try{n(!0),c("");let{orders:e,total:t}=await U.getOrders();s(e),a(t)}catch(e){console.error("Error fetching orders:",e),c(e instanceof Error?e.message:"Failed to fetch orders")}finally{n(!1)}},[]);return(0,r.useEffect)(()=>{o()},[o]),{orders:e,total:t,loading:l,error:i,refetch:o}},W=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},B=()=>{let[e,s]=(0,r.useState)(null),{stats:t,loading:l,error:n,refetch:i}=R(),{orders:c,loading:o,error:d,refetch:x}=q(),m=l||o,u=n||d,h=async()=>{await Promise.all([i(),x()]),s(new Date)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Sales Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:e?"Last updated: ".concat(e.toLocaleTimeString()):"Monitor your sales performance and order management"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)(W,{onClick:h,variant:"outline",disabled:m,className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4 ".concat(m?"animate-spin":"")}),(0,a.jsx)("span",{children:"Refresh"})]})})]}),u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-red-600",children:u}),(0,a.jsx)(W,{onClick:h,size:"sm",variant:"outline",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Retry"})]})}),(0,a.jsx)(w,{stats:t,loading:l}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(S,{orders:c,loading:o}),(0,a.jsx)(I,{orders:c,loading:o})]}),(0,a.jsx)(z,{orders:c,loading:o,onExportCSV:()=>{if(0===c.length)return void alert("No orders to export");let e=new Blob([[["Order ID","Customer Name","Phone","Address","Subtotal (৳)","Delivery Charge (৳)","Total Amount (৳)","Status","Date","Time"],...c.map(e=>[e.id.toString(),e.guest_name,e.guest_phone,'"'.concat(e.guest_address.replace(/"/g,'""'),'"'),e.subtotal.toFixed(2),e.delivery_charge.toFixed(2),e.total_amount.toFixed(2),e.status.replace("_"," "),new Date(e.created_at).toLocaleDateString(),new Date(e.created_at).toLocaleTimeString()])].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let t=URL.createObjectURL(e);s.setAttribute("href",t),s.setAttribute("download","orders-export-".concat(new Date().toISOString().split("T")[0],".csv")),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}}})]})};var V=t(54416),J=t(84616),H=t(85339),K=t(47924),Y=t(40646),G=t(13717),$=t(62525);let Q=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",danger:"bg-red-600 text-white hover:bg-red-700"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},X=e=>{let{isOpen:s,onClose:t,title:r,children:l}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"p-6",children:l})]})}):null},Z=e=>{var s,t;let{product:l,onSubmit:n,onCancel:i,loading:c}=e,[o,d]=(0,r.useState)({name:(null==l?void 0:l.name)||"",description:(null==l?void 0:l.description)||"",is_active:null==(s=null==l?void 0:l.is_active)||s,has_variants:null!=(t=null==l?void 0:l.has_variants)&&t});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(o)},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),(0,a.jsx)("input",{type:"text",value:o.name,onChange:e=>d({...o,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,maxLength:255})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{value:o.description,onChange:e=>d({...o,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.is_active,onChange:e=>d({...o,is_active:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Product is active"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.has_variants,onChange:e=>d({...o,has_variants:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Has variants"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,a.jsx)(Q,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),(0,a.jsx)(Q,{type:"submit",disabled:c,children:c?"Saving...":l?"Update Product":"Create Product"})]})]})},ee=()=>{let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(""),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[f,j]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[v,N]=(0,r.useState)(!1),w="https://api.grayscale-technologies.com/api",A=()=>localStorage.getItem("access_token"),C=async()=>{try{l(!0);let e=A(),t=await fetch("".concat(w,"/v1/products/"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to fetch products");let a=await t.json();s(a),i(null)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}},_=async e=>{try{N(!0);let s=A();if(!(await fetch("".concat(w,"/v1/products/"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to create product");await C(),u(!1)}catch(e){i(e instanceof Error?e.message:"Failed to create product")}finally{N(!1)}},k=async e=>{if(y)try{N(!0);let s=A();if(!(await fetch("".concat(w,"/v1/products/").concat(y.id,"/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to update product");await C(),g(!1),b(null)}catch(e){i(e instanceof Error?e.message:"Failed to update product")}finally{N(!1)}},S=async()=>{if(y)try{N(!0);let e=A();if(!(await fetch("".concat(w,"/v1/products/").concat(y.id,"/"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok)throw Error("Failed to delete product");await C(),j(!1),b(null)}catch(e){i(e instanceof Error?e.message:"Failed to delete product")}finally{N(!1)}};(0,r.useEffect)(()=>{C()},[]);let E=e.filter(e=>{var s;let t=e.name.toLowerCase().includes(c.toLowerCase())||(null==(s=e.description)?void 0:s.toLowerCase().includes(c.toLowerCase())),a=null===d||e.is_active===d;return t&&a});return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Products"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Add, edit, and manage your product catalog"})]}),(0,a.jsxs)(Q,{onClick:()=>u(!0),children:[(0,a.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("p",{className:"text-red-600",children:n})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(K.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search products...",value:c,onChange:e=>o(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(Q,{variant:null===d?"default":"outline",onClick:()=>x(null),size:"sm",children:"All"}),(0,a.jsx)(Q,{variant:!0===d?"default":"outline",onClick:()=>x(!0),size:"sm",children:"Active"}),(0,a.jsx)(Q,{variant:!1===d?"default":"outline",onClick:()=>x(!1),size:"sm",children:"Inactive"})]})]}),t?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===E.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(p.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first product"}),(0,a.jsxs)(Q,{onClick:()=>u(!0),children:[(0,a.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}):(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variants"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>{var s;return(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10",children:e.image?(0,a.jsx)("img",{className:"w-10 h-10 rounded-lg object-cover",src:e.image,alt:e.name}):(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gray-200 flex items-center justify-center",children:(0,a.jsx)(p.A,{className:"w-5 h-5 text-gray-400"})})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.is_active?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y.A,{className:"w-3 h-3 mr-1"}),"Active"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(H.A,{className:"w-3 h-3 mr-1"}),"Inactive"]})})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.has_variants?(0,a.jsxs)("span",{className:"text-blue-600",children:[(null==(s=e.variants)?void 0:s.length)||0," variants"]}):(0,a.jsx)("span",{className:"text-gray-500",children:"No variants"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(Q,{variant:"outline",size:"sm",onClick:()=>{b(e),g(!0)},children:(0,a.jsx)(G.A,{className:"w-4 h-4"})}),(0,a.jsx)(Q,{variant:"danger",size:"sm",onClick:()=>{b(e),j(!0)},children:(0,a.jsx)($.A,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),(0,a.jsx)(X,{isOpen:m,onClose:()=>u(!1),title:"Create New Product",children:(0,a.jsx)(Z,{onSubmit:_,onCancel:()=>u(!1),loading:v})}),(0,a.jsx)(X,{isOpen:h,onClose:()=>{g(!1),b(null)},title:"Edit Product",children:(0,a.jsx)(Z,{product:y||void 0,onSubmit:k,onCancel:()=>{g(!1),b(null)},loading:v})}),(0,a.jsx)(X,{isOpen:f,onClose:()=>{j(!1),b(null)},title:"Delete Product",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete "',null==y?void 0:y.name,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(Q,{variant:"outline",onClick:()=>{j(!1),b(null)},children:"Cancel"}),(0,a.jsx)(Q,{variant:"danger",onClick:S,disabled:v,children:v?"Deleting...":"Delete Product"})]})]})})]})};var es=t(4229),et=t(23227),ea=t(28883),er=t(34869),el=t(29799),en=t(81586);let ei=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",danger:"bg-red-600 text-white hover:bg-red-700"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},ec=e=>{let{label:s,type:t="text",value:r,onChange:l,placeholder:n,required:i=!1,disabled:c=!1,icon:o,maxLength:d,min:x,max:m}=e;return(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s," ",i&&(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"relative",children:[o&&(0,a.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:o}),(0,a.jsx)("input",{type:t,value:r,onChange:e=>l(e.target.value),placeholder:n,className:"w-full ".concat(o?"pl-10":"pl-3"," pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ").concat(c?"bg-gray-100 cursor-not-allowed":""),required:i,disabled:c,maxLength:d,min:x,max:m})]})]})},eo=()=>{let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),p="https://api.grayscale-technologies.com/api",f=()=>localStorage.getItem("access_token"),j=()=>1,y=()=>{let e=f();if(!e)throw Error("Authentication token not found. Please log in again.");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},b=async()=>{try{l(!0),i(null);let e=j();if(!e)throw Error("Company ID not found. Please log in again.");let t=await fetch("".concat(p,"/v1/companies/").concat(e,"/"),{headers:y()});if(401===t.status)throw Error("Your session has expired. Please log in again.");if(!t.ok){let e=await t.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to fetch company data (".concat(t.status,")"))}let a=await t.json();s(a)}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}},N=async e=>{try{if(u(!0),i(null),o(null),!j())throw Error("Company ID not found. Please log in again.");let t=await fetch("".concat(p,"/v1/companies/"),{method:"PATCH",headers:y(),body:JSON.stringify(e)});if(401===t.status)throw Error("Your session has expired. Please log in again.");if(!t.ok){let e=await t.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to update company (".concat(t.status,")"))}let a=await t.json();s(a),x(!1),o("Company information updated successfully!"),setTimeout(()=>o(null),3e3)}catch(e){i(e instanceof Error?e.message:"Failed to update company")}finally{u(!1)}},w=async()=>{try{g(!0),i(null),o(null);let t=j();if(!t)throw Error("Company ID not found. Please log in again.");let a=await fetch("".concat(p,"/dashboard/").concat(t,"/switch-mode/"),{method:"POST",headers:y()});if(401===a.status)throw Error("Your session has expired. Please log in again.");if(!a.ok){let e=await a.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to switch copilot mode (".concat(a.status,")"))}await a.json();let r=!(null==e?void 0:e.copilot_mode);s(e=>e?{...e,copilot_mode:r}:null),o("Successfully switched to ".concat(r?"Autopilot":"Manual"," mode!")),setTimeout(()=>o(null),3e3),await b()}catch(e){i(e instanceof Error?e.message:"Failed to switch copilot mode")}finally{g(!1)}},C=(t,a)=>{e&&s({...e,[t]:a})},_=(t,a)=>{e&&s({...e,user:{...e.user,[t]:a}})};return((0,r.useEffect)(()=>{b()},[]),t)?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Company"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure your company settings and information"})]}),(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Company"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure your company settings and information"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:d?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ei,{variant:"outline",onClick:()=>{x(!1),b()},disabled:m,children:[(0,a.jsx)(V.A,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,a.jsxs)(ei,{onClick:()=>{e&&N(e)},disabled:m,children:[(0,a.jsx)(es.A,{className:"w-4 h-4 mr-2"}),m?"Saving...":"Save Changes"]})]}):(0,a.jsxs)(ei,{onClick:()=>x(!0),children:[(0,a.jsx)(G.A,{className:"w-4 h-4 mr-2"}),"Edit Company"]})})]}),c&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Y.A,{className:"w-5 h-5 text-green-600 mr-2"}),(0,a.jsx)("p",{className:"text-green-600",children:c})]})}),n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("p",{className:"text-red-600",children:n})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,a.jsxs)("div",{className:"p-6 space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(et.A,{className:"w-5 h-5 mr-2"}),"Company Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(ec,{label:"Company Name",value:e.name,onChange:e=>C("name",e),placeholder:"Enter company name",required:!0,disabled:!d,icon:(0,a.jsx)(et.A,{className:"w-4 h-4"}),maxLength:255}),(0,a.jsx)(ec,{label:"WhatsApp Number",value:e.whatsapp_number,onChange:e=>C("whatsapp_number",e),placeholder:"Enter WhatsApp number",required:!0,disabled:!d,icon:(0,a.jsx)(P.A,{className:"w-4 h-4"}),maxLength:20}),(0,a.jsx)(ec,{label:"Company Email",type:"email",value:e.email||"",onChange:e=>C("email",e||void 0),placeholder:"Enter company email",disabled:!d,icon:(0,a.jsx)(ea.A,{className:"w-4 h-4"}),maxLength:254}),(0,a.jsx)(ec,{label:"Website",type:"url",value:e.website||"",onChange:e=>C("website",e||void 0),placeholder:"https://example.com",disabled:!d,icon:(0,a.jsx)(er.A,{className:"w-4 h-4"}),maxLength:200})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(A.A,{className:"w-5 h-5 mr-2"}),"User Information"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(ec,{label:"Username",value:e.user.username,onChange:e=>_("username",e),placeholder:"Enter username",required:!0,disabled:!d,icon:(0,a.jsx)(A.A,{className:"w-4 h-4"}),maxLength:150}),(0,a.jsx)(ec,{label:"Email Address",type:"email",value:e.user.email,onChange:e=>_("email",e),placeholder:"Enter email address",disabled:!d,icon:(0,a.jsx)(ea.A,{className:"w-4 h-4"}),maxLength:254}),(0,a.jsx)(ec,{label:"First Name",value:e.user.first_name,onChange:e=>_("first_name",e),placeholder:"Enter first name",disabled:!d,maxLength:150}),(0,a.jsx)(ec,{label:"Last Name",value:e.user.last_name,onChange:e=>_("last_name",e),placeholder:"Enter last name",disabled:!d,maxLength:150})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(el.A,{className:"w-5 h-5 mr-2"}),"Delivery Settings"]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.allow_cash_on_delivery,onChange:e=>C("allow_cash_on_delivery",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:!d}),(0,a.jsx)(en.A,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Allow Cash on Delivery"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:e.supports_home_delivery,onChange:e=>C("supports_home_delivery",e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:!d}),(0,a.jsx)(el.A,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Supports Home Delivery"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Delivery Scope ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"delivery_scope",value:"dhaka_only",checked:"dhaka_only"===e.delivery_scope,onChange:e=>C("delivery_scope",e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:!d}),(0,a.jsx)(O.A,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Dhaka Only"})]}),(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"radio",name:"delivery_scope",value:"NATIONWIDE",checked:"NATIONWIDE"===e.delivery_scope,onChange:e=>C("delivery_scope",e.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500",disabled:!d}),(0,a.jsx)(er.A,{className:"w-4 h-4 ml-2 mr-1 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"NATIONWIDE"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsx)(ec,{label:"Delivery Charge Inside Dhaka (৳)",type:"number",value:e.delivery_charge_inside_dhaka,onChange:e=>C("delivery_charge_inside_dhaka",parseInt(e)||0),placeholder:"0",disabled:!d,min:0,max:0x7fffffff}),(0,a.jsx)(ec,{label:"Delivery Charge Outside Dhaka (৳)",type:"number",value:e.delivery_charge_outside_dhaka,onChange:e=>C("delivery_charge_outside_dhaka",parseInt(e)||0),placeholder:"0",disabled:!d,min:0,max:0x7fffffff})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 mr-2"}),"Copilot Mode"]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"flex items-center mb-2",children:(0,a.jsxs)("h4",{className:"text-base font-semibold text-gray-900",children:["Current Mode: ",e.copilot_mode?(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-purple-100 text-purple-800 ml-2",children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-1"}),"Autopilot"]}):(0,a.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 ml-2",children:"Manual"})]})}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4",children:e.copilot_mode?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("strong",{children:"Autopilot mode is active."})," The AI is automatically handling all customer conversations without requiring manual intervention. Agents cannot send manual messages."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("strong",{children:"Manual mode is active."})," Agents can manually respond to customer conversations. The AI provides suggestions but does not send automatic responses."]})}),(0,a.jsxs)("div",{className:"bg-white/60 rounded-md p-3 text-sm text-gray-600",children:[(0,a.jsx)("p",{className:"mb-1",children:(0,a.jsx)("strong",{children:"\uD83D\uDCA1 Tip:"})}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Autopilot:"})," Best for high-volume, 24/7 automated support"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Manual:"})," Best for personalized, human-led conversations"]})]})]})]})}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-purple-200",children:(0,a.jsx)(ei,{onClick:w,disabled:h,variant:e.copilot_mode?"outline":"default",className:e.copilot_mode?"bg-purple-600 text-white hover:bg-purple-700":"",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Switching..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{className:"w-4 h-4 mr-2"}),"Switch to ",e.copilot_mode?"Manual":"Autopilot"," Mode"]})})})]})]}),e.created_at&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)("strong",{children:"Company ID:"})," ",e.id]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[(0,a.jsx)("strong",{children:"Created:"})," ",new Date(e.created_at).toLocaleDateString()]})]})]})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Company"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure your company settings and information"})]}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("p",{className:"text-red-600",children:"Failed to load company data"})]})})]})};var ed=t(69803),ex=t(25657),em=t(92657),eu=t(78749),eh=t(24357);let eg=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",danger:"bg-red-600 text-white hover:bg-red-700",success:"bg-green-600 text-white hover:bg-green-700"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},ep=e=>{let{isOpen:s,onClose:t,title:r,children:l,size:n="default"}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg ".concat({default:"max-w-2xl",large:"max-w-4xl"}[n]," w-full max-h-[90vh] overflow-y-auto"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"p-6",children:l})]})}):null},ef=e=>{var s;let{assistant:t,onSubmit:l,onCancel:n,loading:i}=e,[c,o]=(0,r.useState)({assistant_name:(null==t?void 0:t.assistant_name)||"",persona:(null==t?void 0:t.persona)||"",rules:(null==t?void 0:t.rules)||"",is_active:null==(s=null==t?void 0:t.is_active)||s});return(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l(c)},className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assistant Name *"}),(0,a.jsx)("input",{type:"text",value:c.assistant_name,onChange:e=>o({...c,assistant_name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,maxLength:100,placeholder:"e.g., Asha, Alex, Maya"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"The name customers will see (max 100 characters)"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Persona *"}),(0,a.jsx)("textarea",{value:c.persona,onChange:e=>o({...c,persona:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,rows:4,placeholder:"Detailed description of the AI's personality, tone, and conversational style. E.g., 'A friendly and empathetic assistant who is an expert on tea and speaks in a warm, welcoming tone.'"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Describe the AI's personality, tone, and conversational style in detail"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rules *"}),(0,a.jsx)("textarea",{value:c.rules,onChange:e=>o({...c,rules:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,rows:6,placeholder:"Specific, hard rules the AI must follow. E.g.: 1. Always ask for confirmation before placing an order 2. Never discuss competitor products 3. Always mention free shipping on orders over $50"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"List specific rules the AI must always follow"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:c.is_active,onChange:e=>o({...c,is_active:e.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"AI Assistant is active"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[(0,a.jsx)(eg,{type:"button",variant:"outline",onClick:n,children:"Cancel"}),(0,a.jsx)(eg,{type:"submit",disabled:i,children:i?"Saving...":t?"Update Assistant":"Create Assistant"})]})]})},ej=()=>{let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,o]=(0,r.useState)(null),[d,x]=(0,r.useState)(""),[m,u]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),[p,f]=(0,r.useState)(!1),[j,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[A,C]=(0,r.useState)(null),[_,k]=(0,r.useState)(!1),S="https://api.grayscale-technologies.com/api",E=()=>localStorage.getItem("access_token"),I=()=>{let e=E();if(!e)throw Error("Authentication token not found. Please log in again.");return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},D=()=>{i(null),o(null)},P=e=>{o(e),setTimeout(()=>o(null),3e3)},O=async()=>{try{l(!0),D();let e=await fetch("".concat(S,"/sales-ai/config/"),{headers:I()});if(401===e.status)throw Error("Your session has expired. Please log in again.");if(!e.ok){let s=await e.json().catch(()=>null);throw Error((null==s?void 0:s.message)||"Failed to fetch AI assistants (".concat(e.status,")"))}let t=await e.json();s(Array.isArray(t)?t:[])}catch(e){i(e instanceof Error?e.message:"An error occurred")}finally{l(!1)}},T=async()=>{try{k(!0),D();let e=await fetch("".concat(S,"/sales-ai/config/get-api-key/"),{headers:I()});if(401===e.status)throw Error("Your session has expired. Please log in again.");if(!e.ok){let s=await e.json().catch(()=>null);throw Error((null==s?void 0:s.message)||"Failed to fetch API key")}let s=await e.json();s?s.api_key?u(s.api_key):Array.isArray(s)&&s.length>0&&s[0].api_key?u(s[0].api_key):u("No API key found"):u("No API key found"),w(!0)}catch(e){i(e instanceof Error?e.message:"Failed to fetch API key")}finally{k(!1)}},L=async e=>{try{k(!0),D();let s=await fetch("".concat(S,"/sales-ai/config/"),{method:"POST",headers:I(),body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to create assistant")}await O(),g(!1),P("AI Assistant created successfully!")}catch(e){i(e instanceof Error?e.message:"Failed to create assistant")}finally{k(!1)}},F=async e=>{if(A)try{k(!0),D();let s=await fetch("".concat(S,"/sales-ai/config/").concat(A.id,"/"),{method:"PATCH",headers:I(),body:JSON.stringify(e)});if(!s.ok){let e=await s.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to update assistant")}await O(),f(!1),C(null),P("AI Assistant updated successfully!")}catch(e){i(e instanceof Error?e.message:"Failed to update assistant")}finally{k(!1)}},z=async()=>{if(A)try{k(!0),D();let e=await fetch("".concat(S,"/sales-ai/config/").concat(A.id,"/"),{method:"DELETE",headers:I()});if(!e.ok){let s=await e.json().catch(()=>null);throw Error((null==s?void 0:s.message)||"Failed to delete assistant")}await O(),y(!1),C(null),P("AI Assistant deleted successfully!")}catch(e){i(e instanceof Error?e.message:"Failed to delete assistant")}finally{k(!1)}},M=async e=>{try{k(!0),D();let s=await fetch("".concat(S,"/sales-ai/config/").concat(e.id,"/"),{method:"PATCH",headers:I(),body:JSON.stringify({is_active:!e.is_active})});if(!s.ok){let e=await s.json().catch(()=>null);throw Error((null==e?void 0:e.message)||"Failed to update assistant status")}await O(),P("AI Assistant ".concat(e.is_active?"deactivated":"activated"," successfully!"))}catch(e){i(e instanceof Error?e.message:"Failed to update assistant status")}finally{k(!1)}},U=async()=>{if(m&&"No API key available"!==m&&"No API key found"!==m)try{await navigator.clipboard.writeText(m),P("API key copied to clipboard!")}catch(e){console.error("Failed to copy API key:",e)}};(0,r.useEffect)(()=>{O()},[]);let R=e.filter(e=>e.assistant_name.toLowerCase().includes(d.toLowerCase())||e.persona.toLowerCase().includes(d.toLowerCase()));return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage AI Persona"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Configure your AI assistant's personality and behavior"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(eg,{variant:"outline",onClick:T,disabled:_,children:[(0,a.jsx)(ed.A,{className:"w-4 h-4 mr-2"}),"Get API Key"]}),(0,a.jsxs)(eg,{onClick:()=>g(!0),children:[(0,a.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Add AI Assistant"]})]})]}),c&&(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(Y.A,{className:"w-5 h-5 text-green-600 mr-2"}),(0,a.jsx)("p",{className:"text-green-600",children:c})]})}),n&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(H.A,{className:"w-5 h-5 text-red-600 mr-2"}),(0,a.jsx)("p",{className:"text-red-600",children:n})]})}),(0,a.jsxs)("div",{className:"relative max-w-md",children:[(0,a.jsx)(K.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,a.jsx)("input",{type:"text",placeholder:"Search assistants...",value:d,onChange:e=>x(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),t?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(ex.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No AI assistants found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Create your first AI assistant to get started"}),(0,a.jsxs)(eg,{onClick:()=>g(!0),children:[(0,a.jsx)(J.A,{className:"w-4 h-4 mr-2"}),"Add AI Assistant"]})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(e=>(0,a.jsx)("div",{className:"bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3",children:(0,a.jsx)(ex.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.assistant_name}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.updated_at?new Date(e.updated_at).toLocaleDateString():"Recently"})]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("button",{onClick:()=>M(e),className:"p-1 rounded ".concat(e.is_active?"text-green-600":"text-gray-400"),disabled:_,children:e.is_active?(0,a.jsx)(em.A,{className:"w-4 h-4"}):(0,a.jsx)(eu.A,{className:"w-4 h-4"})})})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",children:e.persona}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.is_active?"Active":"Inactive"}),(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)(eg,{variant:"outline",size:"sm",onClick:()=>{C(e),v(!0)},children:(0,a.jsx)(em.A,{className:"w-3 h-3"})}),(0,a.jsx)(eg,{variant:"outline",size:"sm",onClick:()=>{C(e),f(!0)},children:(0,a.jsx)(G.A,{className:"w-3 h-3"})}),(0,a.jsx)(eg,{variant:"danger",size:"sm",onClick:()=>{C(e),y(!0)},children:(0,a.jsx)($.A,{className:"w-3 h-3"})})]})]})]})},e.id))}),(0,a.jsx)(ep,{isOpen:h,onClose:()=>g(!1),title:"Create New AI Assistant",size:"large",children:(0,a.jsx)(ef,{onSubmit:L,onCancel:()=>g(!1),loading:_})}),(0,a.jsx)(ep,{isOpen:p,onClose:()=>{f(!1),C(null)},title:"Edit AI Assistant",size:"large",children:(0,a.jsx)(ef,{assistant:A||void 0,onSubmit:F,onCancel:()=>{f(!1),C(null)},loading:_})}),(0,a.jsx)(ep,{isOpen:b,onClose:()=>{v(!1),C(null)},title:"AI Assistant: ".concat(null==A?void 0:A.assistant_name),size:"large",children:A&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assistant Name"}),(0,a.jsx)("p",{className:"text-gray-900",children:A.assistant_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Persona"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:A.persona})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rules"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsx)("p",{className:"text-gray-900 whitespace-pre-wrap",children:A.rules})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500 mr-2",children:"Status:"}),(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(A.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:A.is_active?"Active":"Inactive"})]}),A.updated_at&&(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date(A.updated_at).toLocaleString()]})]})]})}),(0,a.jsx)(ep,{isOpen:j,onClose:()=>{y(!1),C(null)},title:"Delete AI Assistant",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete "',null==A?void 0:A.assistant_name,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)(eg,{variant:"outline",onClick:()=>{y(!1),C(null)},children:"Cancel"}),(0,a.jsx)(eg,{variant:"danger",onClick:z,disabled:_,children:_?"Deleting...":"Delete Assistant"})]})]})}),(0,a.jsx)(ep,{isOpen:N,onClose:()=>{w(!1),u(null)},title:"Company API Key",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"Use this API key to integrate your AI assistant with external applications:"}),(0,a.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("code",{className:"text-sm font-mono text-gray-900 break-all",children:m||"Loading..."}),m&&"No API key available"!==m&&"No API key found"!==m&&(0,a.jsx)(eg,{variant:"outline",size:"sm",onClick:U,className:"ml-2",children:(0,a.jsx)(eh.A,{className:"w-4 h-4"})})]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Keep this key secure and don't share it publicly. Use it in your application's authentication headers."})]})})]})};var ey=t(71366),eb=t(81497),ev=t(12486);let eN=e=>{let{children:s,className:t="",variant:r="default",size:l="default",...n}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ".concat({default:"bg-blue-600 text-white hover:bg-blue-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",danger:"bg-red-600 text-white hover:bg-red-700",success:"bg-green-600 text-white hover:bg-green-700"}[r]," ").concat({default:"px-4 py-2 text-sm",sm:"px-3 py-1.5 text-xs"}[l]," ").concat(t),...n,children:s})},ew=e=>{let{isOpen:s,onClose:t,title:r,children:l,size:n="default"}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg ".concat({default:"max-w-2xl",large:"max-w-4xl"}[n]," w-full max-h-[90vh] overflow-y-auto"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:r}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,a.jsx)("div",{className:"p-6",children:l})]})}):null},eA=e=>{let{type:s,message:t,onClose:r}=e,l="error"===s?H.A:Y.A;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-lg border ".concat("error"===s?"bg-red-50 border-red-200 text-red-800":"bg-green-50 border-green-200 text-green-800"," mb-6"),children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l,{className:"w-5 h-5 mr-3"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t})]}),(0,a.jsx)("button",{onClick:r,className:"text-current hover:opacity-70",children:(0,a.jsx)(V.A,{className:"w-4 h-4"})})]})},eC=e=>{let{message:s}=e,t="user"===s.sender,r="agent"===s.sender;return(0,a.jsx)("div",{className:"flex ".concat(t?"justify-end":"justify-start"," mb-4"),children:(0,a.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat(t?"bg-blue-600 text-white":r?"bg-green-100 text-green-900 border border-green-200":"bg-gray-100 text-gray-900 border border-gray-200"),children:[(0,a.jsxs)("div",{className:"flex items-center mb-1",children:[t||r?(0,a.jsx)(A.A,{className:"w-3 h-3 mr-1"}):(0,a.jsx)(ex.A,{className:"w-3 h-3 mr-1"}),(0,a.jsx)("span",{className:"text-xs opacity-75",children:t?"Customer":r?"Agent":"AI Assistant"})]}),(0,a.jsx)("p",{className:"text-sm",children:s.content}),(0,a.jsx)("p",{className:"text-xs opacity-50 mt-1",children:new Date(s.timestamp).toLocaleTimeString()})]})})},e_=()=>{let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[c,o]=(0,r.useState)(!1),[d,x]=(0,r.useState)(null),[m,u]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[f,j]=(0,r.useState)("all"),[y,b]=(0,r.useState)(!1),[N,w]=(0,r.useState)(""),[C,_]=(0,r.useState)(!1),k=(0,r.useRef)(null),S="https://api.grayscale-technologies.com/api",E=()=>{let e=localStorage.getItem("access_token");if(!e)throw Error("Authentication token not found. Please log in again.");return e},I=()=>{let e=E();return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}},D=()=>{x(null),u(null)},P=e=>{u(e),setTimeout(()=>u(null),5e3)},O=e=>{x(e),setTimeout(()=>x(null),8e3)},T=()=>{var e;null==(e=k.current)||e.scrollIntoView({behavior:"smooth"})};(0,r.useEffect)(()=>{T()},[null==t?void 0:t.messages]);let L=async()=>{try{i(!0),D();let e=await fetch("".concat(S,"/dashboard/inbox/"),{method:"GET",headers:I()});if(!e.ok){if(401===e.status){localStorage.removeItem("access_token"),O("Session expired. Please log in again."),window.location.href="/login";return}throw Error("Failed to fetch conversations: ".concat(e.status))}let t=(await e.json()).map(e=>({id:e.session_id||e.id||"",session_id:e.session_id||e.id,customer_name:e.customer_name||"Unknown Customer",customer_phone:e.customer_phone||"No phone",status:e.status||"active",created_at:e.created_at||new Date().toISOString(),updated_at:e.updated_at||new Date().toISOString(),message_count:e.message_count||0,last_message:e.last_message||"No messages",mode:e.mode||"manual"}));s(t)}catch(e){O(e instanceof Error?e.message:"Failed to fetch conversations"),console.error("Error fetching conversations:",e)}finally{i(!1)}},F=async e=>{try{o(!0),D();let s=await fetch("".concat(S,"/dashboard/").concat(e,"/messages-latest/"),{method:"GET",headers:I()});if(!s.ok)throw Error("Failed to fetch conversation details: ".concat(s.status));let t=await s.json(),a=Array.isArray(t)?t.map(e=>({id:e.id,content:e.content,sender:"user"===e.role?"user":"assistant"===e.role||"suggestion"===e.role?"ai":"agent",timestamp:e.created_at,message_type:"text"})):[];l(e=>e?{...e,messages:a}:null)}catch(e){O(e instanceof Error?e.message:"Failed to fetch conversation details"),console.error("Error fetching conversation details:",e)}finally{o(!1)}},z=async e=>{l(e),b(!0);let s=e.session_id||e.id;s&&await F(s)},M=async()=>{if(!t||!N.trim())return;let e=N.trim(),s=t.session_id||t.id;try{_(!0),D();let t=await fetch("".concat(S,"/chat/reply/"),{method:"POST",headers:I(),body:JSON.stringify({session_id:s,message:e,sender:"agent"})});if(!t.ok)throw Error("Failed to send message: ".concat(t.status));let a={id:(await t.json()).id||Date.now(),content:e,sender:"agent",timestamp:new Date().toISOString(),message_type:"text"};l(e=>e?{...e,messages:[...e.messages||[],a]}:null),w(""),P("Message sent successfully"),await L()}catch(e){O(e instanceof Error?e.message:"Failed to send message"),console.error("Error sending message:",e)}finally{_(!1)}},U=(e,s)=>{if("autopilot"===s)return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"Autopilot"]});let t={active:{color:"bg-green-100 text-green-800",icon:ey.A,label:"Active"},closed:{color:"bg-gray-100 text-gray-800",icon:Y.A,label:"Closed"},autopilot:{color:"bg-purple-100 text-purple-800",icon:v.A,label:"Autopilot"}},r=t[e]||t.active,l=r.icon;return(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(r.color),children:[(0,a.jsx)(l,{className:"w-3 h-3 mr-1"}),r.label]})},R=e.filter(e=>{var s,t,a;let r=(null==(s=e.customer_name)?void 0:s.toLowerCase().includes(h.toLowerCase()))||(null==(t=e.customer_phone)?void 0:t.includes(h))||(null==(a=e.last_message)?void 0:a.toLowerCase().includes(h.toLowerCase())),l="all"===f||"autopilot"===f&&"autopilot"===e.mode||"autopilot"!==f&&e.status===f;return r&&l});return(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{let e=setInterval(()=>{L()},3e4);return()=>clearInterval(e)},[]),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Manage Conversations"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"View and manage customer conversations with your AI assistant"})]}),(0,a.jsxs)(eN,{onClick:L,disabled:n,variant:"outline",children:[(0,a.jsx)(g.A,{className:"w-4 h-4 mr-2 ".concat(n?"animate-spin":"")}),"Refresh"]})]})}),d&&(0,a.jsx)(eA,{type:"error",message:d,onClose:()=>x(null)}),m&&(0,a.jsx)(eA,{type:"success",message:m,onClose:()=>u(null)}),(0,a.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(K.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by customer name, phone, or message...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(eN,{variant:"all"===f?"default":"outline",onClick:()=>j("all"),size:"sm",children:"All"}),(0,a.jsx)(eN,{variant:"active"===f?"default":"outline",onClick:()=>j("active"),size:"sm",children:"Active"}),(0,a.jsx)(eN,{variant:"autopilot"===f?"default":"outline",onClick:()=>j("autopilot"),size:"sm",children:"Autopilot"}),(0,a.jsx)(eN,{variant:"closed"===f?"default":"outline",onClick:()=>j("closed"),size:"sm",children:"Closed"})]})]}),n?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):0===R.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(eb.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No conversations found"}),(0,a.jsx)("p",{className:"text-gray-600",children:h||"all"!==f?"Try adjusting your search or filters":"Conversations will appear here when customers start chatting with your AI assistant"})]}):(0,a.jsx)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Message"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Updated"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:R.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-8 h-8",children:(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:(0,a.jsx)(A.A,{className:"w-4 h-4 text-blue-600"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.customer_name||"Unknown Customer"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.customer_phone||"No phone"})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:e.last_message||"No messages"}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[e.message_count||0," messages"]})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:U(e.status,e.mode)}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(e.updated_at).toLocaleDateString()," ",new Date(e.updated_at).toLocaleTimeString()]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsx)(eN,{variant:"outline",size:"sm",onClick:()=>z(e),title:"View conversation",children:(0,a.jsx)(eb.A,{className:"w-4 h-4"})})})]},e.id))})]})})}),(0,a.jsx)(ew,{isOpen:y,onClose:()=>{b(!1),l(null),w("")},title:"Chat with ".concat((null==t?void 0:t.customer_name)||"Customer"),size:"large",children:t&&(0,a.jsxs)("div",{className:"flex flex-col h-[600px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between pb-4 border-b",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:(0,a.jsx)(A.A,{className:"w-5 h-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-lg",children:t.customer_name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:t.customer_phone})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[U(t.status,t.mode),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:[t.message_count||0," messages"]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-4 space-y-2",children:c?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):t.messages&&t.messages.length>0?(0,a.jsxs)(a.Fragment,{children:[t.messages.map((e,s)=>(0,a.jsx)(eC,{message:e},e.id||s)),(0,a.jsx)("div",{ref:k})]}):(0,a.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,a.jsx)(eb.A,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),(0,a.jsx)("p",{children:"No messages in this conversation yet"})]})}),"autopilot"!==t.mode?(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:N,onChange:e=>w(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:C}),(0,a.jsx)(eN,{onClick:M,disabled:C||!N.trim(),children:C?(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}):(0,a.jsx)(ev.A,{className:"w-4 h-4"})})]})}):(0,a.jsx)("div",{className:"pt-4 border-t",children:(0,a.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(v.A,{className:"w-5 h-5 text-purple-600 mr-3 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-purple-900 mb-1",children:"Autopilot Mode Active"}),(0,a.jsx)("p",{className:"text-sm text-purple-700",children:"This conversation is in autopilot mode. The AI is handling responses automatically. Manual messaging is disabled."})]})]})})})]})})]})};function ek(){let[e,s]=(0,r.useState)("dashboard"),t=(0,l.useSearchParams)();return(0,r.useEffect)(()=>{let e=t.get("view");e&&s(e)},[t]),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-orange-50 overflow-hidden",children:[(0,a.jsx)(n.default,{}),(0,a.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)(h,{onNavigate:e=>{console.log("Dashboard received navigation request to:",e),s(e)},activeComponent:e})}),(0,a.jsx)("main",{className:"flex-1 min-w-0 px-4 sm:px-6 lg:px-8 py-8 overflow-auto",children:(0,a.jsx)("div",{className:"w-full",children:(()=>{switch(console.log("Rendering content for activeView:",e),e){case"dashboard":default:return(0,a.jsx)(B,{});case"products":return(0,a.jsx)(ee,{});case"company":return(0,a.jsx)(eo,{});case"conversations":return(0,a.jsx)(e_,{});case"ai-persona":return(0,a.jsx)(ej,{})}})()})})]})]})}function eS(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-white to-orange-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),children:(0,a.jsx)(ek,{})})}},89627:(e,s,t)=>{Promise.resolve().then(t.bind(t,3653))}},e=>{var s=s=>e(e.s=s);e.O(0,[66,448,766,808,485,428,961,441,684,358],()=>s(89627)),_N_E=e.O()}]);